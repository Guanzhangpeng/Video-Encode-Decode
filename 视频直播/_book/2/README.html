<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <title>采集以及写入 | 内容概述</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.0.3">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    
    <link rel="next" href="../3/README.html" />
    
    
    <link rel="prev" href="../01.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book"  data-level="2" data-basepath=".." data-revision="1482018129495">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                         内容概述
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="01.html">
            
                
                    <a href="../01.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         视频技术概述
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="2" data-path="2/README.html">
            
                
                    <a href="../2/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         采集以及写入
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="3/README.html">
            
                
                    <a href="../3/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         美颜滤镜效果
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="4/README.html">
            
                
                    <a href="../4/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         视频编码技术
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="7ios/README.html">
            
                
                    <a href="../7ios/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                         iOS视频硬编码
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6" data-path="8ios/README.html">
            
                
                    <a href="../8ios/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                         iOS视频软编码
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7" data-path="9yuv/README.html">
            
                
                    <a href="../9yuv/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                         YUV颜色空间
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8" data-path="5/README.html">
            
                
                    <a href="../5/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                         流媒体协议
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="9" data-path="6/README.html">
            
                
                    <a href="../6/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                         推流演示
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="10" data-path="10ios/README.html">
            
                
                    <a href="../10ios/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                         iOS中实现推流
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >内容概述</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_402">
                    
                        <h1 id="">采集视频</h1>
<h3 id="">概述</h3>
<ul>
<li>音视频采集是直播架构的第一环，是视频的来源<ul>
<li>其实视频的采集有多个应用场景：比如二维码开发</li>
</ul>
</li>
<li>音视频采集包括两部分：<ul>
<li>视频采集</li>
<li>音频采集</li>
</ul>
</li>
<li>在iOS开发中，是可以同步采集视频&amp;音频的，使用方式也非常简单</li>
<li>相关的采集API都封装在AVFoundation框架中，导入对应框架，实现功能即可</li>
</ul>
<h3 id="">采集步骤</h3>
<h4 id="">采集步骤文字描述</h4>
<ul>
<li>PS：如果做过二维码开发，应该对相关步骤非常熟悉（非常类似）</li>
<li>导入框架<ul>
<li>相关API主要在AVFoundation框架中，因此需要先导入框架</li>
</ul>
</li>
<li>创建捕捉会话（AVCaptureSession）<ul>
<li>该会话用于连接之后的输入源&amp;输出源</li>
<li>输入源：摄像头&amp;话筒</li>
<li>输出源：拿到对应的音频&amp;视频数据的出口</li>
<li>会话：用于将输入源&amp;输出源连接起来</li>
</ul>
</li>
<li>设置视频输入源&amp;输出源<ul>
<li>输入源（AVCaptureDeviceInput）：从摄像头输入</li>
<li>输出源（AVCaptureVideoDataOutput）：可以设置代理，在代理方法中拿到数据</li>
<li>将输入&amp;输出添加到会话中</li>
</ul>
</li>
<li>设置音频输入源&amp;输出源<ul>
<li>输入源（AVCaptureDeviceInput）：从话筒输入</li>
<li>输出源（AVCaptureAudioDataOutput）：可以设置代理，在代理方法中拿到数据</li>
<li>将输入&amp;输出添加到会话中</li>
</ul>
</li>
<li>添加预览图层（可选）<ul>
<li>如果希望用户看到采集的画面，可以添加预览图层</li>
<li>该预览图层不是必须的，及时没有添加也可以正常采集数据</li>
</ul>
</li>
<li>开始采集即可<ul>
<li>调用会话（AVCaptureSession）的startRunning方法即可开始采集</li>
</ul>
</li>
</ul>
<h4 id="">代码解析</h4>
<ul>
<li><p>整体代码步骤</br><img src="../Images/Snip20161011_38.png" alt=""></p>
</li>
<li><p>函数一（设置视频输入输出）</br><img src="../Images/Snip20161011_39.png" alt=""></p>
</li>
<li><p>函数二（设置音频输入输出）</br><img src="../Images/Snip20161011_41.png" alt=""></p>
</li>
<li><p>添加预览图层</br><img src="../Images/Snip20161011_42.png" alt=""></p>
</li>
<li><p>遵守协议，实现代理方法</br><img src="../Images/Snip20161011_44.png" alt=""></p>
</li>
</ul>
<h4 id="">实现代码</h4>
<ul>
<li>整体步骤代码</li>
</ul>
<pre><code class="lang-swift">    <span class="hljs-comment">// 1.创建捕捉会话</span>
    <span class="hljs-keyword">let</span> session = <span class="hljs-type">AVCaptureSession</span>()

    <span class="hljs-comment">// 2.设置视频输入输出</span>
    setupVideoSource(session: session)

    <span class="hljs-comment">// 3.设置音频输入输出</span>
    setupAudioSource(session: session)

    <span class="hljs-comment">// 4.添加预览图层</span>
    setupPreviewLayer(session: session)

    <span class="hljs-comment">// 5.开始扫描</span>
    session.startRunning()
</code></pre>
<ul>
<li>函数一（设置视频输入输出）</li>
</ul>
<pre><code class="lang-swift">    <span class="hljs-comment">// 给会话设置视频源（输入源&amp;输出源）</span>
    fileprivate <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">setupVideoSource</span><span class="hljs-params">(session : AVCaptureSession)</span> </span>{
        <span class="hljs-comment">// 1.创建输入</span>
        <span class="hljs-comment">// 1.1.获取所有的设备（包括前置&amp;后置摄像头）</span>
        guard <span class="hljs-keyword">let</span> devices = <span class="hljs-type">AVCaptureDevice</span>.devices(withMediaType: <span class="hljs-type">AVMediaTypeVideo</span>) <span class="hljs-keyword">as</span>? [<span class="hljs-type">AVCaptureDevice</span>] <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }

        <span class="hljs-comment">// 1.2.取出获取前置摄像头</span>
        <span class="hljs-keyword">let</span> d = devices.<span class="hljs-built_in">filter</span>({ <span class="hljs-keyword">return</span> $<span class="hljs-number">0</span>.position == .front }).first

        <span class="hljs-comment">// 1.3.通过前置摄像头创建输入设备</span>
        guard <span class="hljs-keyword">let</span> videoInput = try? <span class="hljs-type">AVCaptureDeviceInput</span>(device: d) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }

        <span class="hljs-comment">// 2.创建输出源</span>
        <span class="hljs-comment">// 2.1.创建视频输出源</span>
        <span class="hljs-keyword">let</span> videoOutput = <span class="hljs-type">AVCaptureVideoDataOutput</span>()

        <span class="hljs-comment">// 2.2.设置代理,以及代理方法的执行队列（在代理方法中拿到采集到的数据）</span>
        <span class="hljs-keyword">let</span> queue = <span class="hljs-type">DispatchQueue</span>.global()
        videoOutput.setSampleBufferDelegate(<span class="hljs-keyword">self</span>, queue: queue)

        <span class="hljs-comment">// 3.将输入&amp;输出添加到会话中</span>
        <span class="hljs-comment">// 3.1.添加输入源</span>
        <span class="hljs-keyword">if</span> session.canAddInput(videoInput) {
            session.addInput(videoInput)
        }

        <span class="hljs-comment">// 3.2.添加输出源</span>
        <span class="hljs-keyword">if</span> session.canAddOutput(videoOutput) {
            session.addOutput(videoOutput)
        }

        <span class="hljs-comment">// 4.给connect赋值</span>
        videoConnect = videoOutput.connection(withMediaType: <span class="hljs-type">AVMediaTypeVideo</span>)
    }
</code></pre>
<ul>
<li>函数二（设置音频输入输出）</li>
</ul>
<pre><code class="lang-swift">    <span class="hljs-comment">// 给会话设置音频源（输入源&amp;输出源）</span>
    fileprivate <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">setupAudioSource</span><span class="hljs-params">(session : AVCaptureSession)</span> </span>{
        <span class="hljs-comment">// 1.创建输入</span>
        guard <span class="hljs-keyword">let</span> device = <span class="hljs-type">AVCaptureDevice</span>.defaultDevice(withMediaType: <span class="hljs-type">AVMediaTypeAudio</span>) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
        guard <span class="hljs-keyword">let</span> audioInput = try? <span class="hljs-type">AVCaptureDeviceInput</span>(device: device) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }

        <span class="hljs-comment">// 2.创建输出源</span>
        <span class="hljs-keyword">let</span> audioOutput = <span class="hljs-type">AVCaptureAudioDataOutput</span>()
        <span class="hljs-keyword">let</span> queue = <span class="hljs-type">DispatchQueue</span>.global()
        audioOutput.setSampleBufferDelegate(<span class="hljs-keyword">self</span>, queue: queue)

        <span class="hljs-comment">// 3.将输入&amp;输出添加到会话中</span>
        <span class="hljs-keyword">if</span> session.canAddInput(audioInput) {
            session.addInput(audioInput)
        }
        <span class="hljs-keyword">if</span> session.canAddOutput(audioOutput) {
            session.addOutput(audioOutput)
        }
    }
</code></pre>
<ul>
<li>添加预览图</li>
</ul>
<pre><code class="lang-swift">    <span class="hljs-comment">// 添加预览图层</span>
    fileprivate <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">setupPreviewLayer</span><span class="hljs-params">(session : AVCaptureSession)</span> </span>{
        <span class="hljs-comment">// 1.创建预览图层</span>
        guard <span class="hljs-keyword">let</span> previewLayer = <span class="hljs-type">AVCaptureVideoPreviewLayer</span>(session: session) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }

        <span class="hljs-comment">// 2.设置图层的属性</span>
        previewLayer.frame = view.bounds

        <span class="hljs-comment">// 3.将图层添加到view中</span>
        view.layer.insertSublayer(previewLayer, at: <span class="hljs-number">0</span>)
    }
</code></pre>
<ul>
<li>遵守协议，实现代理方法</li>
</ul>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">ViewController</span> : <span class="hljs-title">AVCaptureVideoDataOutputSampleBufferDelegate</span>, <span class="hljs-title">AVCaptureAudioDataOutputSampleBufferDelegate</span> </span>{
    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">captureOutput</span><span class="hljs-params">(<span class="hljs-number">_</span> captureOutput: AVCaptureOutput!, didOutputSampleBuffer sampleBuffer: CMSampleBuffer!, from connection: AVCaptureConnection!)</span> </span>{
        <span class="hljs-keyword">if</span> connection == videoConnect {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"视频数据"</span>)
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"音频数据"</span>)
        }
    }
}
</code></pre>
<h4 id="">停止扫描</h4>
<ul>
<li>比如用户不再直接，我们需要停止扫描<ul>
<li>移除预览图层（不再直播肯定不需要预览图层了）</li>
<li>停止扫描（调用session的stopRunning方法）</li>
<li>将session设置为nil（对象不再使用，指针置空）</li>
</ul>
</li>
</ul>
<pre><code class="lang-swift">    <span class="hljs-preprocessor">@IBAction</span> <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">stopScanning</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// 1.移除图层</span>
        previewLayer?.removeFromSuperlayer()

        <span class="hljs-comment">// 2.停止扫描</span>
        session?.stopRunning()

        <span class="hljs-comment">// 3.将对象重置为nil</span>
        session = <span class="hljs-built_in">nil</span>
    }
</code></pre>
<h1 id="">切换镜头&amp;聚焦&amp;写入文件</h1>
<h3 id="">切换镜头（前置&amp;后置摄像头）</h3>
<ul>
<li><p>切换步骤</p>
<ul>
<li>给切换过程添加动画</li>
<li>获取当前摄像头是前置还是后置</li>
<li>取出相反的摄像头（之前是前置，这次取出后置）</li>
<li>通过新摄像头重新获取设备（AVCaptureDevice）</li>
<li>通过设备（AVCaptureDevice）创建新的输入（AVCaptureDeviceInput）</li>
<li>移除旧input&amp;添加新的input<ul>
<li>注意：修改session配置之前先调用开启修改配置选项，配置完成后，调用提交修改配置选项</li>
<li>session?.beginConfiguration()</li>
<li>session?.commitConfiguration()</li>
</ul>
</li>
<li>保存新的input</li>
</ul>
</li>
<li><p>图例解析：</br><img src="../Images/Snip20161012_45.png" alt=""></p>
</li>
<li>代码如下：</li>
</ul>
<pre><code class="lang-swift">    <span class="hljs-preprocessor">@IBAction</span> <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">switchScene</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// 0.执行动画</span>
        <span class="hljs-keyword">let</span> rotaionAnim = <span class="hljs-type">CATransition</span>()
        rotaionAnim.type = <span class="hljs-string">"oglFlip"</span>
        rotaionAnim.subtype = <span class="hljs-string">"fromLeft"</span>
        rotaionAnim.duration = <span class="hljs-number">0.5</span>
        view.layer.add(rotaionAnim, forKey: <span class="hljs-built_in">nil</span>)

        <span class="hljs-comment">// 1.校验videoInput是否有值</span>
        guard <span class="hljs-keyword">let</span> videoInput = videoInput <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }

        <span class="hljs-comment">// 2.获取当前镜头</span>
        <span class="hljs-keyword">let</span> position : <span class="hljs-type">AVCaptureDevicePosition</span> = videoInput.device.position == .front ? .back : .front

        <span class="hljs-comment">// 3.创建新的input</span>
        guard <span class="hljs-keyword">let</span> devices = <span class="hljs-type">AVCaptureDevice</span>.devices(withMediaType: <span class="hljs-type">AVMediaTypeVideo</span>) <span class="hljs-keyword">as</span>? [<span class="hljs-type">AVCaptureDevice</span>] <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
        guard <span class="hljs-keyword">let</span> newDevice = devices.<span class="hljs-built_in">filter</span>({$<span class="hljs-number">0</span>.position == position}).first <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }
        guard <span class="hljs-keyword">let</span> newVideoInput = try? <span class="hljs-type">AVCaptureDeviceInput</span>(device: newDevice) <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> }

        <span class="hljs-comment">// 4.移除旧输入，添加新输入</span>
        session?.beginConfiguration()
        session?.removeInput(videoInput)
        session?.addInput(newVideoInput)
        session?.commitConfiguration()

        <span class="hljs-comment">// 5.保存新输入</span>
        <span class="hljs-keyword">self</span>.videoInput = newVideoInput
    }
</code></pre>
<h3 id="">写入文件</h3>
<ul>
<li>写入文件步骤<ul>
<li>创建AVCaptureMovieFileOutput对象<ul>
<li>用于将音频视频写入文件</li>
</ul>
</li>
<li>将movieFileOutput对象，添加到session的输出中<ul>
<li>写入文件也是一种输出</li>
</ul>
</li>
<li>设置视频的稳定模式<ul>
<li>不设置可能会出现视频跳帧等问题</li>
<li>通常设置为自动即可</li>
</ul>
</li>
<li>开始写入</li>
<li>录制完成，停止写入即可</li>
</ul>
</li>
<li>代码解析</br><img src="../Images/Snip20161015_52.png" alt=""></li>
<li>代码如下：</li>
<li>创建、添加、设置代码</li>
</ul>
<pre><code class="lang-swift">        <span class="hljs-comment">// 添加文件输出</span>
        <span class="hljs-keyword">let</span> movieFileoutput = <span class="hljs-type">AVCaptureMovieFileOutput</span>()
        <span class="hljs-keyword">self</span>.movieFileOutput = movieFileoutput
        session.addOutput(movieFileoutput)
        <span class="hljs-comment">// 获取视频的connection</span>
        <span class="hljs-keyword">let</span> connection = movieFileoutput.connection(withMediaType: <span class="hljs-type">AVMediaTypeVideo</span>)
        <span class="hljs-comment">// 设置视频的稳定模式</span>
        connection?.preferredVideoStabilizationMode = .auto

        <span class="hljs-comment">// 开始写入视频</span>
        movieFileoutput.startRecording(toOutputFileURL: outputFileURL, recordingDelegate: <span class="hljs-keyword">self</span>)
</code></pre>
<ul>
<li>停止写入代码</li>
</ul>
<pre><code class="lang-swift">        <span class="hljs-comment">// 0.停止写入</span>
        <span class="hljs-keyword">self</span>.movieFileOutput?.stopRecording()
</code></pre>
<ul>
<li>在代理方法中监听开始、结束事件</li>
</ul>
<pre><code class="lang-swift"><span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">ViewController</span> : <span class="hljs-title">AVCaptureFileOutputRecordingDelegate</span> </span>{
    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">capture</span><span class="hljs-params">(<span class="hljs-number">_</span> captureOutput: AVCaptureFileOutput!, didStartRecordingToOutputFileAt fileURL: URL!, fromConnections connections: [Any]!)</span> </span>{
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"开始录制"</span>)
    }

    <span class="hljs-func"><span class="hljs-keyword">func</span> <span class="hljs-title">capture</span><span class="hljs-params">(<span class="hljs-number">_</span> captureOutput: AVCaptureFileOutput!, didFinishRecordingToOutputFileAt outputFileURL: URL!, fromConnections connections: [Any]!, error: Error!)</span> </span>{
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"停止录制"</span>)
    }
}
</code></pre>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../01.html" class="navigation navigation-prev " aria-label="Previous page: 视频技术概述"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../3/README.html" class="navigation navigation-next " aria-label="Next page: 美颜滤镜效果"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
